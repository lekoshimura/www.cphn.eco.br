<!doctype html>
<html lang="pt-br">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Maximum of 65 characters -->
  <title>CPHN - Visite Nossa Sede</title>
  <!-- Maximum of 155 characters -->
  <meta name="description" content="CPHN - Visite Nossa Sede">
  <meta name="author" content="Leonardo Eiji Koshimura">

  <!-- open graphics: facebook -->
  <meta property="og:url" content="https://www.cphn.eco.br/onde-estamos.html" />
  <!-- Maximum 35 characters -->
  <meta property="og:title" content="CPHN">
  <!-- Maximum 65 characters -->
  <meta property="og:description" content="Visite nossa sede" />
  <!-- http://ogp.me/#types -->
  <meta property="og:type" content="website" />
  <!-- Image(JPG or PNG) of size less than 300KB and minimum dimension of 300 x 200 pixel is advised -->
  <meta property="og:image" content="https://www.cphn.eco.br/images/og-image-squared.jpg" />
  <meta property="og:image:secure_url" content="https://www.cphn.eco.br/images/og-image-squared.jpg" />
  <meta property="og:image:type" content="image/jpg" />
  <meta property="og:image:width" content="400" />
  <meta property="og:image:height" content="400" />
  <meta property="og:image:alt" content="Logotipo do CPHN" />
  <meta property="og:site_name" content="CPHN" />
  <meta property="og:locale" content="pt_BR" />

  <!-- twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="CPHN - Onde Estamos" />
  <meta name="twitter:description" content="CPHN - Visite nossa sede" />
  <meta name="twitter:url" content="https://www.cphn.eco.br/onde-estamos.html" />
  <meta name="twitter:image" content="https://www.cphn.eco.br/images/og-image-squared.jpg" />

  <!-- favicon   -->
  <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="msapplication-TileColor" content="#203A24">
  <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
  <meta name="theme-color" content="#203A24">

  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.2/css/bulma.min.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css" integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
    crossorigin="" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet-responsive-popup@0.6.3/leaflet.responsive.popup.css" />
  <!-- build:css styles/main.css -->
  <link rel="stylesheet" href="styles/main.css">
  <!-- endbuild -->

  <style>
    .leaflet-pane {
      z-index: 1;
    }

    .map {
      margin: 0;
      margin-top: 52px;
      height: calc(100vh - 52px);
      width: 100vw;
    }

    .popup--header--cphn {
      display: flex;
      align-items: center;
      margin-bottom: 1rem;
      font-size: 1.11rem;
    }

    .popup--header--logo {
      height: 28px;
    }

    .popup--zoomin {
      cursor: pointer;
      display: flex;
      align-items: center;
    }

    .popup--zoomin--icon {
      font-size: 1.25rem;
      margin-right: 0.25rem;
    }

  </style>
</head>

<body>
  <!--[if IE]>
      <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
  <header>
    <!-- START NAV -->
    <nav class="navbar is-fixed-top navbar--green-background navbar--with-shadow">
      <div class="container">
        <div class="navbar-brand">
          <a class="navbar-item" href="../">
            <img src="images/logo-white.png" alt="Logotipo CPHN">
            <spam class="header--logo-txt has-text-white title--cphn">CPHN</spam>
          </a>
          <span class="navbar-burger burger has-text-white" data-target="navbarMenu">
            <span></span>
            <span></span>
            <span></span>
          </span>
        </div>
        <div id="navbarMenu" class="navbar-menu navbar--green-background">
          <div class="navbar-end">
            <a class="navbar-item has-text-white" href="/">
              Home
            </a>
            <a class="navbar-item has-text-white" href="galeria.html">
              Fotos
            </a>
            <a class="navbar-item has-text-white is-active" href="onde-estamos.html">
              Onde Estamos
            </a>
            <a class="navbar-item has-text-white" href="contato.html">
              Contato
            </a>
            <a class="navbar-item has-text-white">
              Nossas Publica√ß√µes
            </a>
          </div>
        </div>
      </div>
    </nav>
    <!-- END NAV -->
  </header>

  <main id="map" class="map"></main>

  <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js" integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg=="
    crossorigin=""></script>
  <script src="https://unpkg.com/leaflet-responsive-popup@0.6.3/leaflet.responsive.popup.js"></script>

  <!-- build:js scripts/vendor.js -->
  <!-- endbuild -->
  <!-- build:js scripts/main.js -->
  <script src="scripts/main.js"></script>
  <!-- endbuild -->
  <script>
    let map;
    document.addEventListener('DOMContentLoaded', function (event) {
      const PMSP_LAT = -23.70;
      const PMSP_LNG = -46.63;
      const CPHN_LAT = -23.5711;
      const CPHN_LNG = -46.4420;
      const PMSP_COORD = L.latLng(PMSP_LAT, PMSP_LNG);
      const CPHN_COORD = L.latLng(CPHN_LAT, CPHN_LNG);

      /* mapa */
      map = L.map('map', {
        minZoom: 7,
        maxZoom: 18,
        crs: L.CRS.EPSG3857,
        zoomControl: false
      }).setView(PMSP_COORD, 10);

      /* tileserver */
      let Esri_WorldTopoMap = L.tileLayer(
        'https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}', {
          attribution: 'Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community'
        })
      Esri_WorldTopoMap.addTo(map);

      /* marker e popup */
      let popupcontent =
        `
        <p class="popup--header--cphn">
          <img class="popup--header--logo" src="images/logo-green.png" alt="Logotipo CPHN">
          <spam class="header--logo-txt title--cphn">CPHN</spam>
        </p>
        <address>
          <strong>Rua Jaime Ribeiro Wright, 618</strong><br> 
          Itaquera<br>
          08260-070<br>
          S√£o Paulo, SP<br>
          (11) 2522.8299
        </address>
        <p class="has-text-link popup--zoomin"><spam class="popup--zoomin--icon">üîç</spam> Zoom</p>`;
      let popup = L.responsivePopup().setContent(popupcontent);
      let marker = L.marker().setLatLng([CPHN_LAT, CPHN_LNG]);
      marker.addTo(map).bindPopup(popup).openPopup();

      /* flyto */

      let popupZoomin = document.querySelector('.popup--zoomin');

      popupZoomin.addEventListener('click', function () {
        map.closePopup(popup);
        map.flyTo(CPHN_COORD, 16);
      });

      map.addEventListener('zoomstart', function () {
        map.closePopup(popup);
      });

      map.addEventListener('zoomend', function () {
        map.openPopup(popup);
      });

      /* layer sp */

      loadJson = function (t, e) {
        var a = new XMLHttpRequest;
        a.onreadystatechange = function (t) {
            4 === this.readyState && 200 === this.status && e(JSON.parse(this.responseText))
          },
          a.open("GET", t, !0),
          a.send()
      };

      makeLayer = function (t, e) {
        return L.geoJSON(t, {
          style: {
            color: "#1B5E20"
          },
          crs: L.CRS.EPSG3857
        }).addTo(map);
      };

      loadJsonFromLocalStorage = function (t) {
        var e = localStorage.getItem(t);
        if (e) {
          return makeLayer(JSON.parse(e))
        } else {
          loadJson(t, function (e) {
            localStorage.setItem(t, JSON.stringify(e)),
              makeLayer(e)
          }.bind(this))
        }
      }
      let limitesp = loadJsonFromLocalStorage("data/gis/sp.geojson");

      map.on('zoomend', function () {
        map.getZoom() <= 13 ? limitesp.addTo(map) : limitesp.removeFrom(map);
      }).bind(this);
    });

  </script>
  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());
    gtag('config', 'UA-104560120-4');

  </script>
</body>

</html>
